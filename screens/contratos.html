<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marco Jurídico</title>
    <link rel="stylesheet" href="../assets/contratos/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/contratos/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/contratos/fonts/simple-line-icons.min.css">
    <link rel="stylesheet" href="../assets/contratos/css/styles.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <!-- CONTENEDOR -->
    <div style="width: 100%; height: 100vh; display: flex; min-width: 375px;">
        <!-- DIV IZQUIERDA -->
        <div style="width: 75px; height: 100vh;">
            <!-- MENU LATERAL -->
            <div class="bg-body shadow d-flex flex-column flex-shrink-0 top-0 bottom-0" style="width: 4.5rem; height: 100vh;"><a class="text-center link-body-emphasis d-block p-3 text-decoration-none border-bottom" href="#" title="" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="Icon-only"><i class="fa fa-money" style="font-size: 25px;"></i><span class="visually-hidden">Icon-only</span></a>
                <ul class="nav nav-pills flex-column text-center nav-flush mb-auto">
                    <li class="nav-item"><a class="nav-link active link-light py-3 border-bottom rounded-0" href="mis_tarjetas.html" aria-current="page"><i class="icon-credit-card"></i></a></li>
                    <li class="nav-item"><a class="nav-link py-3 border-bottom rounded-0" href="añadirTarjeta.html"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                <path d="M12 4C11.4477 4 11 4.44772 11 5V11H5C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13H11V19C11 19.5523 11.4477 20 12 20C12.5523 20 13 19.5523 13 19V13H19C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11H13V5C13 4.44772 12.5523 4 12 4Z" fill="currentColor"></path>
                            </svg></a></li>
                    <li class="nav-item"><a class="nav-link py-3 border-bottom rounded-0" href="movimientos.html"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-credit-card">
                                <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v1h14V4a1 1 0 0 0-1-1H2zm13 4H1v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V7z"></path>
                                <path d="M2 10a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-1z"></path>
                            </svg></a></li>
                    <li class="nav-item"><a class="nav-link py-3 border-bottom rounded-0" href="contratos.html"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                <path d="M7 18H17V16H7V18Z" fill="currentColor"></path>
                                <path d="M17 14H7V12H17V14Z" fill="currentColor"></path>
                                <path d="M7 10H11V8H7V10Z" fill="currentColor"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z" fill="currentColor"></path>
                            </svg></a></li>
                </ul>
                <div class="dropdown p-3 border-top"><a class="dropdown-toggle link-body-emphasis d-flex align-items-center text-decoration-none" aria-expanded="false" data-bs-toggle="dropdown" role="button"><img class="rounded-circle" alt="" width="32" height="32" src="https://cdn.bootstrapstudio.io/placeholders/1400x800.png" style="object-fit: cover;"></a>
                    <div class="dropdown-menu shadow text-small" data-popper-placement="top-start"><a class="dropdown-item" href="perfil.html">Perfil</a>
                        <div class="dropdown-divider"></div><a class="dropdown-item" id="elemento_cerrar_sesion" href="#">Cerrar Sesión</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- DIV DE LA DERECHA -->
        <div style="flex-grow: 1; height: 100vh; display: flex; justify-content: center; align-items: center; position: relative; min-height: 600px;">
            <h1 style="position: absolute; top: 3%; left: 50%; transform: translate(-50%, -50%); margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 3px;">Marco Jurídico</h1>
            <div style="display: flex; width: 100%; height: 80%; margin-top: 120px;">
                <div style="width: 100%; min-height: 100%; "> 
                    <div class="accordion" id="accordionExample">
                        <div class="card">
                          <div class="card-header" id="headingOne"  style="text-align: center;">
                            <h5 class="mb-0">
                              <button style="font-family: unset;" class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Contrato Empresarial
                              </button>
                            </h5>
                          </div>
                          <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                            <div class="card-body">
                              Este contrato empresarial hace referencia a el uso de los servicios proporcionados por nuestra aplicación. La Empresa se compromete a proporcionar al Cliente acceso y utilización de la aplicación de acuerdo con las condiciones establecidas. El Cliente acepta pagar los cargos asociados con los servicios según lo acordado en los términos de facturación. Ambas partes acuerdan cumplir con las leyes y regulaciones aplicables durante la duración de este contrato. La Empresa se reserva el derecho de modificar, mejorar o descontinuar la aplicación, notificando al Cliente con la antelación adecuada. Este contrato  puede ser rescindido por cualquiera de las partes con previo aviso. En caso de controversia, ambas partes se comprometen a buscar una solución amistosa antes de recurrir a acciones legales.
                            </div>
                          </div>
                        </div>
                      </div>
                </div>
                <div style="width: 100%; min-height: 100%;">
                    <div class="accordion" id="accordionExample2">
                        <div class="card">
                          <div class="card-header" id="headingOne" style="text-align: center;">
                            <h5 class="mb-0">
                              <button style="font-family: unset;" class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne2" aria-expanded="true" aria-controls="collapseOne2">
                                Terminos y condiciones
                              </button>
                            </h5>
                          </div>
                          <div id="collapseOne2" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample2">
                            <div class="card-body">
                              Al utilizar esta aplicación, el usuario acepta cumplir con los términos y condiciones establecidos. La información proporcionada por el usuario será tratada de acuerdo con nuestra política de privacidad. El contenido de la aplicación está protegido por derechos de autor y no puede ser reproducido sin autorización. La aplicación puede recopilar datos anónimos para mejorar la experiencia del usuario. No nos hacemos responsables de pérdidas o daños causados por el uso de la aplicación. Nos reservamos el derecho de modificar los términos y condiciones en cualquier momento. Al continuar utilizando la aplicación después de cualquier cambio, el usuario acepta las nuevas condiciones.
                            </div>
                          </div>
                        </div>
                      </div>
                </div>
            </div>
        </div>
    </div>
    <script>

        // Verifico si la sesión está activa. Si lo está me quedo en la página, sino se te echa de la aplicación para que puedas volver a iniciar sesión.
        var formData1 = new FormData();
        var token1 = localStorage.getItem("token");
        formData1.append("token", token1);
        fetch("../php/verificar_sesion.php", {
            method: "POST",
            body: formData1
        })
        .then(response => response.json())
        .then(resultado => {
            if (resultado["status"] == "ERROR") {
                localStorage.removeItem("token");
                window.location.replace("login.html");
            }
        });

        // Evento que comprueba sesión en las páginas cacheadas y no cacheadas al querer interactuar con la aplicación.
        window.addEventListener("click", function() {

          var token2 = localStorage.getItem("token");
          var formData2 = new FormData();
          formData2.append("token", token2);
          fetch("../php/verificar_sesion.php", {
            method: "POST",
            body: formData2
          })
          .then(response => response.json())
          .then(resultado => {
            if (resultado["status"] == "ERROR") {
                localStorage.removeItem("token");
                window.location.replace("login.html");
            }
          });

        });

        // Añadir evento "click "al elemento HTML cuyo id es "elemento_cerrar_sesion". Una vez se hace click, se ejecuta la función que modifica el estado de la sesión en la BD
        // de 0(Sesión Activa) a 1 (Sesión Caducada). Además se elimina el token del localStorage y se redirige a la pagina del Login.
        var elemento_cerrar_sesion = document.getElementById("elemento_cerrar_sesion");
        elemento_cerrar_sesion.addEventListener("click", function (event) {

            var token3 = localStorage.getItem("token");
            var formData3 = new FormData();
            formData3.append("token", token3);
            fetch("../php/cerrar_sesion.php", {
                method: "POST",
                body: formData3
            });
            localStorage.removeItem("token");
            window.location.replace("login.html");

        });

    </script>
    <script src="../assets/contratos/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
</html>